function getType(e){return e instanceof Object&&!(e instanceof Array)?"object":e instanceof Array?"array":!1}function isSameType(e){for(var t=getType(e[0]),n=0,i=!0;e[n]&&i;){var s=getType(e[n]);e.hasOwnProperty(n)&&((s!==t||["object","array"].indexOf(s)<0)&&(i=!1),n++)}return i}function mergeCopy(e,t,n){var i=-1;if(e instanceof Array){i=e.length-t.length;var s=[]}if(i>0){for(var o=0;i>o;o++)s.push(void 0);t=t.concat(s)}return $.each(t,function(t,i){return t instanceof Object&&e[i]instanceof Object&&isSameType([t,e[i]])&&n?mergeCopy(e[i],t,n):void("undefined"!=typeof t&&(e[i]=t))}),e}function Request(e){this.canSend=!0,this.documentSupport=!0,this.method="undefined"==typeof e.method?"POST":e.method,this.type="undefined"!=typeof e.type?e.type:"",this.async="undefined"==typeof e.async?!0:e.async,"undefined"==typeof e.url?this.canSend=!1:(this.url=e.url,this.url.indexOf(" ")>0&&(this.selector=this.url.substr(this.url.indexOf(" ")+1),this.url=this.url.substr(0,this.url.indexOf(" ")))),"undefined"!=typeof e.events&&"complete"in e.events?this.events=e.events:this.canSend=!1}function Require(e,t){var n,i=0;"string"==typeof e&&(e=[e]),n=e.length,$.each(e,function(e,s){var o=new Element("script",{src:e,data:{require:""},type:"text/javascript"});$("head").inject(o),"undefined"!=typeof t&&o.addEvent("load",function(){i++,i===n&&t()})})}Object.prototype.extend=function(e,t){this[e]=t},Object.prototype.implement=function(e,t){if(this instanceof Array)for(var n,i=this,s=0;n=i[s++];)n.prototype[e]=t;else this.prototype[e]=t},null==window.$&&window.extend("$",function(e){return/\s/.test(e)||"#"!==e.charAt(0)?document.querySelectorAll(e):document.getElementById(e.substr(1))}),window.SJS={tokenlist:typeof DOMTokenList},Array.implement("clear",function(){var e={};return this.filter(function(t){var n=t.valueOf(),i=e[n];return e[n]=!0,!i})}),Object.implement("merge",function(e,t){if("undefined"==typeof t&&(t=!1),e.length>=2&&isSameType(e)){var n=getType(e[0]);if(["object","array"].indexOf(n)>=0)return $.each(e,function(n,i){"undefined"!=typeof e[i+1]&&(e[i+1]=mergeCopy(n,e[i+1],t))}),e[e.length-1];console.error('Array or object expected as argument, "'+typeof e[0]+'" given instead.')}else{if(1===e.length&&e[0]instanceof Object)return e[0];console.error("No relevant arguments given")}}),[NodeList,Node,Object].implement("size",function(e){var t=this.getNode();if("undefined"==typeof e&&(e=!1),t.self==window)var n={x:e?t.outerWidth:t.innerWidth,y:e?t.outerHeight:t.innerHeight};else var n={x:e?t.offsetWidth:t.clientWidth,y:e?t.offsetHeight:t.clientHeight};return n}),[NodeList,Node].implement("offset",function(){var e=this.getNode();return{top:e.offsetTop,bottom:$("html").size(!0).y-(e.offsetTop+e.size(!0).y),left:e.offsetLeft,right:window.size(!0).x-(e.offsetLeft+e.size(!0).x)}}),[NodeList,Node].implement("offsetParent",function(){return this.getNode().offsetParent.offset()}),String.implement("toCamelCase",function(){var e=new RegExp(/([^\_\-\s]+)/g),t="";return $.each(this.match(e),function(e){t+=e.charAt(0).toUpperCase()+e.slice(1)}),t}),String.implement("firstUpper",function(){return this.charAt(0).toUpperCase()+this.slice(1)}),[Object,NodeList].implement("each",function(){var e,t;if(1==arguments.length?(t=arguments[0],e=this):(e=arguments[0],t=arguments[1]),e instanceof Array||e instanceof NodeList)for(var n=0;n<e.length;n++)t.call(e[n],e[n],n);else for(var i in e)e.hasOwnProperty(i)&&t.call(null,e[i],i)});var Element=function(e,t){var n=document.createElement(e);return t&&$.each(t,function(e,t){switch(t){case"data":$.each(e,function(e,t){e instanceof Object?n.set(t,JSON.stringify(e),"data"):n.set(t,e,"data")});break;case"html":e instanceof Array?e[0]instanceof Array?$.each(e,function(e,t){"undefined"==typeof e[2]&&(e[2]="inside"),n.inject(new Element(e[0],e[1]),e[2])}):("undefined"==typeof e[2]&&(e[2]="inside"),n.inject(new Element(e[0],e[1]),e[2])):n.set(t,e);break;default:n.set(t,e)}}),n};[Node,NodeList,Object].implement("getNode",function(){return this instanceof NodeList?this.first():this}),Node.implement("setData",function(e,t){void 0!==this.dataset&&(this.dataset[e]=t),this.setAttribute("data-"+e,t)}),Node.implement("getData",function(e,t){return void 0!==this.dataset?this.dataset[e]:this.getAttribute("data-"+e)}),NodeList.implement("first",function(){return this.item(0)}),NodeList.implement("last",function(){return this.item(this.length-1)}),[NodeList,Node].implement("set",function(e,t,n){function i(e,t,n,i){if("data"==i)n instanceof Object?e.setData(t,JSON.stringify(n)):e.setData(t,n);else switch(t){case"html":e.innerHTML=n;break;case"text":e.textContent=n;break;default:e.setAttribute(t,n)}}"undefined"==typeof n&&(n="attr"),this instanceof NodeList?this.each(function(s){i(s,e,t,n)}):i(this,e,t,n)}),[NodeList,Node].implement("get",function(e,t){function n(e,t,n){if("data"==n){var i=e.getData(t);if("undefined"==typeof i)return!1;try{return JSON.parse(i)}catch(s){return i}}else switch(t){case"tag":return e.nodeName;case"html":return e.innerHTML;case"text":return e.textContent;default:return e.getAttribute(t)}}return"undefined"==typeof t&&(t="attr"),n(this.getNode(),e,t)}),[NodeList,Node].implement("getParent",function(){return this.getNode().parentNode}),[NodeList,Node].implement("getElement",function(e){return this.getNode().querySelector(e)}),[NodeList,Node].implement("getElements",function(e){return this.getNode().querySelectorAll(e)}),[NodeList,Node].implement("getNext",function(){return this.getNode().nextElementSibling}),[NodeList,Node].implement("getPrevious",function(){return this.getNode().previousElementSibling}),[NodeList,Node].implement("getFirstChild",function(){return this.getNode().firstElementChild}),[NodeList,Node].implement("getLastChild",function(){return this.getNode().lastElementChild}),[NodeList,Node].implement("getSiblings",function(){var e,t=[],n=this.getNode();for(e=this.getNode().getParent().getFirstChild();e;)e!==n&&t.push(e),e=e.getNext();return t}),[NodeList,Node].implement("inject",function(){function e(e,t,n){switch(n){case"inside":t.appendChild(e);break;case"before":t.getParent().insertBefore(e,t.previousSibling);break;case"after":t.getParent().insertBefore(e,t.nextSibling)}return e}var t,n,i,s,o,r="inside";return"string"==typeof arguments[0]?t=arguments[0]:(arguments[0]instanceof Node||arguments[0]instanceof Array)&&(s=arguments[0]),"undefined"==typeof arguments[1]&&(n={}),arguments[1]instanceof Object?n=arguments[1]:"string"==typeof arguments[1]&&(r=arguments[1]),"string"==typeof arguments[2]&&(r=arguments[2]),t&&n&&r&&(s=new Element(t,n)),o=this.getNode(),s instanceof Array?(i=s,arr=[],$.each(i,function(t,n){arr.push(e(t,o,r))}),arr):e(s,o,r)}),[NodeList,Node].implement("isChildOf",function(e){var t,e=(this.getNode(),$(e).getNode());for(t=this.getParent();null!=t;){if(t==e)return!0;t=t.getParent()}return!1}),[NodeList,Node].implement("removeElement",function(e){function t(e,t){i?(n=e.getElements(t),n.each(function(e){e.remove()})):e.remove()}var n,i=!1;"undefined"!=typeof e&&(i=!0),this instanceof NodeList?this.each(function(n){t(n,e)}):t(this,e)}),[NodeList,Node].implement("cloneElement",function(){return this.getNode().cloneNode(!0)}),[NodeList,Node].implement("addClass",function(e){function t(e,t){if("undefined"!=typeof SJS.tokenlist)DOMTokenList.prototype.add.apply(e.classList,t);else{var n=e.className.split(/\s/)||[];e.className=n.concat(t).clear().join(" ")}}if(e.indexOf(" ")&&(e=e.split(/\s/)),this instanceof NodeList){this.each(function(n,i){t(n,e)})}else t(this,e)}),[NodeList,Node].implement("hasClass",function(e){function t(e,t){var n=!0,i=!1;if(/\s/.test(t)&&(i=!0),"undefined"!=typeof SJS.tokenlist){if(i){for(var s=t.split(/\s/),o=0;s[o]&&n;)e.classList.contains(s[o])||(n=!1),o++;return n}return e.classList.contains(t)}var r=e.className.split(/\s/);if(i){for(var s=t.split(/\s/),o=0;s[o]&&n;)-1===r.indexOf(t)&&(n=!1),o++;return n}return r.indexOf(t)>=0?!0:!1}return e?this instanceof NodeList?t(this.first(),e):t(this,e):!1}),[NodeList,Node].implement("removeClass",function(e){function t(e,t){function n(e,t){var n=e.className.split(/\s/);n.indexOf(t)&&(delete n[n.indexOf(t)],e.className=n.join(" "))}var i=!1;if(/\s/.test(t)&&(i=!0),"undefined"!=typeof SJS.tokenlist)if(i){var s=t.split(/\s/);$.each(s,function(t){e.classList.remove(t)})}else e.classList.remove(t);else if(i){var s=t.split(/\s/);$.each(s,function(t){n(e,t)})}else n(e,t)}this instanceof NodeList?this.each(function(n){t(n,e)}):t(this,e)}),[NodeList,Node].implement("toggleClass",function(e){var t=this.getNode();t.hasClass(e)?t.removeClass(e):t.addClass(e)}),[NodeList,Node].implement("setStyle",function(e,t){this instanceof NodeList?this.each(function(n){n.style[e]=t}):this.style[e]=t}),[NodeList,Node].implement("setStyles",function(e){if(this instanceof NodeList)this.each(function(t){$.each(e,function(e,n){t.style[n]=e})});else{var t=this;$.each(e,function(e,n){t.style[n]=e})}}),[NodeList,Node].implement("getStyle",function(e){var t=this.getNode();return"undefined"!=typeof t.style[e]?t.style[e]:!1}),[NodeList,Node].implement("removeStyle",function(e){var t=this.getNode();return"undefined"!=typeof t.style[e]&&(t.style[e]=null),!1}),window.extend("eventCache",{}),window.extend("hasReadyPassed",!1);var translateEvent=function(e){var t=e.split(".")[0];switch(t){case"ready":return[e,"DOMContentLoaded"];default:return[e,t]}};Object.implement("getEventCache",function(e,t){if("undefined"!=typeof window.eventCache[e]){var n,i=window.eventCache[e];return n=!1,$.each(i,function(e,i){e.type===t&&(n=e)}),n}return!1});var SEvent=function(e){this.eventID=e.eid||"e_"+(new Date).getTime(),this.el=e.el||null,this.type=e.type||null,this.fce=e.fce||null,this.event=e.event||null};SEvent.implement("register",function(e){return"undefined"!=typeof e&&(this.event=e),"undefined"==typeof window.eventCache[this.el]&&window.eventCache.extend(this.el,{}),window.eventCache[this.el].extend(this.eventID,{type:this.type,fce:this.fce,eid:this.eventID,event:this.event}),window.eventCache[this.el][this.eventID].fce}),SEvent.implement("unregister",function(){delete window.eventCache[this.el][this.eventID]}),[Node,NodeList].implement("addEvent",function(){function e(e,t,n,i,s){var o=new SEvent({el:e,type:t[0],fce:n});s?e.addEventListener(t[1],o.register(window.event),i):o.register(window.event)}var t,n,i=!1,s=!1;if("string"==typeof arguments[0]?t=arguments[0]:arguments[0]instanceof Object&&(s=arguments[0]),arguments[1]instanceof Function&&(n=arguments[1]),arguments[2]instanceof Boolean&&(i=arguments[2]),s!==!1&&(t=s.type,n=s.fce),t=translateEvent(t),this instanceof NodeList){this.each(function(s){e(s,t,n,i,!0)})}else{if("#document"===this.nodeName&&"DOMContentLoaded"===t&&window.hasReadyPassed===!0)return e(this,t,n,i,!1),void n();e(this,t,n,i,!0),"#document"===this.nodeName&&"DOMContentLoaded"===t&&window.hasReadyPassed===!1&&window.extend("hasReadyPassed",!0)}}),[Node,NodeList].implement("removeEvent",function(e,t,n){function i(e,t){s=window.getEventCache(e,t[0]),e.removeEventListener(t[1],s.fce,n);var i=new SEvent({el:e,eid:s.eid});i.unregister()}var s;e=translateEvent(e),"undefined"==typeof n&&(n=!1),this instanceof NodeList?this.each(function(t){i(t,e)}):i(this,e)}),[Node,NodeList].implement("cloneEvent",function(){var e=arguments[0],t=!1,n=this.getNode();"undefined"!=typeof arguments[1]&&(t=arguments[1]);var i=window.getEventCache(n,e);return t?void t.addEvent(e,i.fce):i}),[Node,NodeList].implement("fireEvent",function(e){function t(e,t){var i=window.getEventCache(e,t[0]);i&&n in window?i.fce.call(e,i.event):(i=document.createEvent("Event"),i.initEvent(t[1],!0,!0),e.dispatchEvent(i))}var n="on"+e;e=translateEvent(e),this instanceof NodeList?this.each(function(n){t(n,e)}):t(this,e)}),Request.implement("send",function(e){var t,n,i,s=this;if("undefined"==typeof e)var e="";if(this.canSend)try{var o=new XMLHttpRequest;if("undefined"!=typeof this.type)try{o.responseType=this.type}catch(r){s.documentSupport=!1}o.onreadystatechange=function(){if(4!=o.readyState||200!=o.status&&0!=o.status)3==o.readyState?"loading"in s.events&&s.events.loading():o.status>=400&&"error"in s.events&&s.events.error();else if("document"===s.type)s.documentSupport?t=o.responseXML:(t=o.responseText,n=document.implementation.createHTMLDocument(""),i=n.documentElement,i.innerHTML=t,t=i),"undefined"!=typeof s.selector&&t&&(t=t.getElement(s.selector)),s.events.complete.call(this,t);else{t=o.responseText;try{t=JSON.parse(t)}catch(e){}s.events.complete.call(this,t)}},o.open(this.method,this.url,this.async),"POST"===this.method&&o.setRequestHeader("Content-type","application/x-www-form-urlencoded"),o.send(e)}catch(r){}else console.error("No url or events defined.")}),[NodeList,Node].implement("load",function(e,t){var n=this.getNode();if("undefined"==typeof t)var t="default";new Request({method:"GET",type:t,url:e,async:!0,events:{complete:function(e){"document"===t?n.inject(e):n.set("text",e)}}}).send()});