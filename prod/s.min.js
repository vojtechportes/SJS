Object.prototype.extend=function(e,t){this[e]=t},Object.prototype.implement=function(e,t){this.prototype[e]=t},Object.prototype.invoke=function(e,t){for(var n,i=this,s=0;n=i[s++];)n.prototype[e]=t},null==window.$&&window.extend("$",function(e){return/\s/.test(e)||"#"!==e.charAt(0)?document.querySelectorAll(e):document.getElementById(e.substr(1))}),Array.implement("clear",function(){var e={};return this.filter(function(t){var n=t.valueOf(),i=e[n];return e[n]=!0,!i})}),Object.implement("isArray",function(e){return"[object Array]"==Object.prototype.toString.call(e)?!0:!1}),String.implement("toCamelCase",function(){return this.replace(/-\D/g,function(e){return e.charAt(1).toUpperCase()})}),String.implement("firstUpper",function(){return this.charAt(0).toUpperCase()+this.slice(1)}),[Object,NodeList].invoke("each",function(){var e,t,n;if(1==arguments.length?(t=arguments[0],e=this):(e=arguments[0],t=arguments[1]),this instanceof NodeList==!1)for(var i in e)e.hasOwnProperty(i)&&"length"!==i&&t.call(null,e[i],i);else for(var s=0;n=e[s++];)t.call(n,n,s-1)});var Element=function(e,t){var n=document.createElement(e);return $.each(t,function(e,t){switch(t){case"data":$.each(e,function(e,t){e instanceof Object?n.setData(t,JSON.stringify(e)):n.setData(t,e)});break;case"events":$.each(e,function(e,t){n.addEvent(t,e)});break;case"styles":n.setStyles(e);break;case"html":e instanceof Array?e[0]instanceof Array?$.each(e,function(e,t){"undefined"==typeof e[2]&&(e[2]="inside"),n.inject(new Element(e[0],e[1]),e[2])}):("undefined"==typeof e[2]&&(e[2]="inside"),n.inject(new Element(e[0],e[1]),e[2])):n.set(t,e);break;default:n.set(t,e)}}),n};[Node,NodeList].invoke("getNode",function(){return this instanceof NodeList?this.first():this}),Node.implement("setData",function(e,t){void 0!==this.dataset&&(this.dataset[e]=t),this.setAttribute("data-"+e,t)}),Node.implement("getData",function(e,t){return void 0!==this.dataset?this.dataset[e]:this.getAttribute("data-"+e)}),NodeList.implement("first",function(){return this.item(0)}),NodeList.implement("last",function(){return this.item(this.length-1)}),[NodeList,Node].invoke("set",function(e,t,n){function i(e,t,n,i){if("data"==i)e instanceof Object?e.setData(t,JSON.stringify(n)):e.setData(t,n);else switch(t){case"html":e.innerHTML=n;break;case"text":e.innerText=n;break;default:e.setAttribute(t,n)}}"undefined"==typeof n&&(n="attr"),this instanceof NodeList?this.each(function(s){i(s,e,t,n)}):i(this,e,t,n)}),[NodeList,Node].invoke("get",function(e,t){function n(e,t,n){if("data"==n){var i=e.getData(t);if("undefined"==typeof i)return!1;try{return JSON.parse(i)}catch(s){return i}}else switch(t){case"html":return e.innerHTML;case"text":return e.innerText;default:return e.getAttribute(t)}}return"undefined"==typeof t&&(t="attr"),n(this.getNode(),e,t)}),[NodeList,Node].invoke("getParent",function(){return this.getNode().parentNode}),[NodeList,Node].invoke("getElement",function(e){return this.getNode().querySelectorAll(e).first()}),[NodeList,Node].invoke("getElements",function(e){return this.getNode().querySelectorAll(e)}),[NodeList,Node].invoke("getNext",function(){return this.getNode().nextElementSibling}),[NodeList,Node].invoke("getPrevious",function(){return this.getNode().previousElementSibling}),[NodeList,Node].invoke("getFirstChild",function(){return this.getNode().firstElementChild}),[NodeList,Node].invoke("getLastChild",function(){return this.getNode().lastElementChild}),[NodeList,Node].invoke("getSiblings",function(){var e,t=[],n=this.getNode();for(e=this.getNode().getParent().getFirstChild();e;)e!==n&&t.push(e),e=e.getNext();return t}),[NodeList,Node].invoke("inject",function(){var e,t,n,i="inside";switch("string"==typeof arguments[0]?e=arguments[0]:arguments[0]instanceof Node&&(n=arguments[0]),arguments[1]instanceof Object?t=arguments[1]:"string"==typeof arguments[1]&&(i=arguments[1]),"string"==typeof arguments[2]&&(i=arguments[2]),e&&t&&i&&(n=new Element(e,t)),parent=this.getNode(),i){case"inside":parent.appendChild(n);break;case"before":parent.getParent().insertBefore(n,parent.previousSibling);break;case"after":parent.getParent().insertBefore(n,parent.nextSibling)}}),[NodeList,Node].invoke("isChildOf",function(e){var t,e=(this.getNode(),$(e).getNode());for(t=this.getParent();null!=t;){if(t==e)return!0;t=t.getParent()}return!1}),[NodeList,Node].invoke("removeElement",function(e){function t(e,t){i?(n=e.getElements(t),n.each(function(e){e.remove()})):e.remove()}var n,i=!1;"undefined"!=typeof e&&(i=!0),this instanceof NodeList?this.each(function(n){t(n,e)}):t(this,e)}),[NodeList,Node].invoke("cloneElement",function(){return this.getNode().cloneNode(!0)}),[NodeList,Node].invoke("addClass",function(e){if(e.indexOf(" ")&&(e=e.split(/\s/)),this instanceof NodeList){this.each(function(t,n){if("undefined"!=typeof DOMTokenList)DOMTokenList.prototype.add.apply(t.classList,e);else{var i=t.className.split(/\s/)||[];t.className=i.concat(e).clear().join(" ")}})}else if("undefined"!=typeof DOMTokenList)DOMTokenList.prototype.add.apply(this.classList,e);else{var t=this.className.split(/\s/)||[];this.className=t.concat(e).clear().join(" ")}}),[NodeList,Node].invoke("hasClass",function(e){return this instanceof NodeList?"undefined"!=typeof DOMTokenList?this.first().classList.contains(e):this.first().className.split(/\s/).indexOf(e)?!0:!1:"undefined"!=typeof DOMTokenList?this.classList.contains(e):this.className.split(/\s/).indexOf(e)?!0:!1}),[NodeList,Node].invoke("removeClass",function(e){if(this instanceof NodeList)this.each(function(t){if("undefined"!=typeof DOMTokenList)t.classList.remove(e);else{var n=t.className.split(/\s/);n.indexOf(e)&&(delete n[n.indexOf(e)],t.className=n.join(" "))}});else if("undefined"!=typeof DOMTokenList)this.classList.remove(e);else{var t=this.className.split(/\s/);t.indexOf(e)&&(delete t[t.indexOf(e)],this.className=t.join(" "))}}),[NodeList,Node].invoke("toggleClass",function(e){var t=this.getNode();t.hasClass(e)?t.removeClass(e):t.addClass(e)}),[NodeList,Node].invoke("setStyle",function(e,t){this instanceof NodeList?this.each(function(n){n.style[e]=t}):this.style[e]=t}),[NodeList,Node].invoke("setStyles",function(e){if(this instanceof NodeList)this.each(function(t){$.each(e,function(e,n){t.style[n]=e})});else{var t=this;$.each(e,function(e,n){t.style[n]=e})}}),[NodeList,Node].invoke("getStyle",function(e){var t=this.getNode();return"undefined"!=typeof t.style[e]?t.style[e]:!1}),[NodeList,Node].invoke("removeStyle",function(e){var t=this.getNode();return"undefined"!=typeof t.style[e]&&(t.style[e]=null),!1}),window.extend("eventCache",{});var translateEvent=function(e){switch(e){case"ready":return"DOMContentLoaded";default:return e}};Object.implement("getEventCache",function(e,t){if("undefined"!=typeof window.eventCache[e]){var n,i=window.eventCache[e];return n=!1,$.each(i,function(e,i){e.type===t&&(n=e)}),n}return!1});var SEvent=function(e){this.eventID=e.eid||"e_"+(new Date).getTime(),this.el=e.el||null,this.type=e.type||null,this.fce=e.fce||null,this.event=e.event||null};SEvent.implement("register",function(e){return"undefined"!=typeof e&&(this.event=e),"undefined"==typeof window.eventCache[this.el]&&window.eventCache.extend(this.el,{}),window.eventCache[this.el].extend(this.eventID,{type:this.type,fce:this.fce,eid:this.eventID,event:this.event}),window.eventCache[this.el][this.eventID].fce}),SEvent.implement("unregister",function(){delete window.eventCache[this.el][this.eventID]}),[Node,NodeList].invoke("addEvent",function(){var e,t,n=!1,i=!1;if("string"==typeof arguments[0]?e=arguments[0]:arguments[0]instanceof Object&&(i=arguments[0]),arguments[1]instanceof Function&&(t=arguments[1]),arguments[2]instanceof Boolean&&(n=arguments[2]),i!==!1&&(e=i.type,t=i.fce),e=translateEvent(e),this instanceof NodeList){this.each(function(i){var s=new SEvent({el:i,type:e,fce:t});i.addEventListener(e,s.register(event),n)})}else{var i=new SEvent({el:this,type:e,fce:t});this.addEventListener(e,i.register(event),n)}}),[Node,NodeList].invoke("removeEvent",function(e,t,n){var i;if(e=translateEvent(e),"undefined"==typeof n&&(n=!1),this instanceof NodeList)this.each(function(t){i=window.getEventCache(t,e),t.removeEventListener(e,i.fce,n);var s=new SEvent({el:t,eid:i.eid});s.unregister()});else{i=window.getEventCache(this,e),this.removeEventListener(e,i.fce,n);var s=new SEvent({el:this,eid:i.eid});s.unregister()}}),[Node,NodeList].invoke("cloneEvent",function(){var e=arguments[0],t=!1,n=this.getNode();"undefined"!=typeof arguments[1]&&(t=arguments[1]);var i=window.getEventCache(n,e);return t?void t.addEvent(e,i.fce):i}),[Node,NodeList].invoke("fireEvent",function(e){if(this instanceof NodeList)this.each(function(t){var n=window.getEventCache(t,e);n&&n.fce.call(t,n.event)});else{var t=window.getEventCache(this,e);t&&t.fce.call(this,t.event)}});